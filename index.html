<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LinkMia - Miami Airport Transfers</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#FF6B35">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="LinkMia">

    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LinkMia">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">

    <!-- SEO & Social -->
    <meta name="description" content="Book luxury airport transfers in Miami. Fast, reliable, premium service.">
    <meta property="og:title" content="LinkMia - Miami Airport Transfers">
    <meta property="og:description" content="Book luxury airport transfers in Miami">
    <meta property="og:image" content="/images/social-preview.png">
    <meta property="og:type" content="website">

    <!-- Performance: Preconnect to Railway proxy for faster Google Maps loading -->
    <link rel="preconnect" href="https://reliable-warmth-production-d382.up.railway.app" crossorigin>
    <link rel="dns-prefetch" href="https://reliable-warmth-production-d382.up.railway.app">
    <link rel="prefetch" href="https://reliable-warmth-production-d382.up.railway.app/api/maps-script" as="script">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #1a1a1a;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .card {
            text-align: center;
            padding: 40px 20px;
        }

        .logo {
            font-size: 32px;
            font-weight: 700;
            color: #FF6B35;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .tagline {
            color: #888;
            font-size: 14px;
            margin-bottom: 40px;
        }

        .btn-primary {
            display: block;
            width: 280px;
            padding: 18px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-whatsapp {
            display: block;
            width: 280px;
            padding: 18px;
            margin: 0 auto;
            background: #25D366;
            color: white;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-whatsapp:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        .btn-whatsapp:active {
            transform: translateY(0);
        }

        .btn-install {
            display: none;
            width: 280px;
            padding: 16px;
            margin: 24px auto 0;
            background: transparent;
            color: #888;
            border: 1px solid #444;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: border-color 0.2s, color 0.2s;
        }

        .btn-install:hover {
            border-color: #666;
            color: #aaa;
        }

        .ios-hint {
            display: none;
            margin-top: 24px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        .ios-hint .highlight {
            color: #007AFF;
        }

        .footer {
            position: fixed;
            bottom: 20px;
            color: #444;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="logo">LinkMia</div>
        <p class="tagline">Miami Airport Transfers</p>

        <!-- Primary Button -->
        <a href="/indexMVP.html?book=1" class="btn-primary">
            Book Airport Transfer
        </a>

        <!-- WhatsApp Button -->
        <a href="https://wa.me/17865093955?text=Hi!%20I%27d%20like%20to%20book%20a%20ride"
           target="_blank"
           rel="noopener"
           class="btn-whatsapp">
            Chat on WhatsApp
        </a>

        <!-- Install App Button (hidden by default, shown when installable) -->
        <button id="installBtn" class="btn-install">
            Add to Home Screen
        </button>

        <!-- iOS Install Hint -->
        <p id="iosInstallHint" class="ios-hint">
            Tap <span class="highlight">Share</span> then <span class="highlight">"Add to Home Screen"</span>
        </p>
    </div>

    <div class="footer">Premium Transportation</div>

    <script>
        // PWA Install prompt
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent default install prompt
            e.preventDefault();
            // Save the event for later
            deferredPrompt = e;
            // Show install button
            document.getElementById('installBtn').style.display = 'block';
        });

        // Check if iOS and show hint
        window.addEventListener('DOMContentLoaded', () => {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

            if (isIOS && !isStandalone) {
                document.getElementById('iosInstallHint').style.display = 'block';
            }
        });

        document.getElementById('installBtn').addEventListener('click', async () => {
            if (!deferredPrompt) return;

            // Show the install prompt
            deferredPrompt.prompt();

            // Wait for user response
            const { outcome } = await deferredPrompt.userChoice;
            console.log('Install outcome:', outcome);

            deferredPrompt = null;
            document.getElementById('installBtn').style.display = 'none';
        });

        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('SW registered'))
                .catch(err => console.log('SW registration failed:', err));
        }

        // Performance: Preload Google Maps script on hover/touch of Book button
        // Gives ~200-400ms head start before user actually clicks
        const bookBtn = document.querySelector('.btn-primary');
        if (bookBtn) {
            const preloadMaps = () => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = 'https://reliable-warmth-production-d382.up.railway.app/api/maps-script';
                link.as = 'script';
                document.head.appendChild(link);
                console.log('ðŸš€ Preloading Google Maps script');
            };
            bookBtn.addEventListener('mouseenter', preloadMaps, { once: true });
            bookBtn.addEventListener('touchstart', preloadMaps, { once: true, passive: true });
        }
    </script>
</body>
</html>
