<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MedTransport - Non-Emergency Medical Transportation</title>
    
    <style>
        /* ============================================
           NEMT PLATFORM - MEDICAL TRANSPORT MVP
           ============================================ */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Medical-themed color system */
            --primary: #2563EB; /* Medical blue */
            --primary-dark: #1D4ED8;
            --primary-light: rgba(37, 99, 235, 0.1);
            --secondary: #059669; /* Medical green */
            --success: #10B981;
            --error: #EF4444;
            --warning: #F59E0B;
            --medicaid: #7C3AED; /* Purple for Medicaid */
            
            /* Text Colors */
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --text-light: #9CA3AF;
            
            /* Surface Colors */
            --white: #FFFFFF;
            --background: #F9FAFB;
            --surface: #F3F4F6;
            --border: #E5E7EB;
            --border-light: #F3F4F6;
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            
            /* Typography */
            --font-xs: 12px;
            --font-sm: 14px;
            --font-base: 16px;
            --font-lg: 18px;
            --font-xl: 20px;
            --font-2xl: 24px;
            --font-3xl: 28px;
            
            --font-normal: 400;
            --font-medium: 500;
            --font-semibold: 600;
            --font-bold: 700;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
            
            /* Transitions */
            --transition-base: 0.2s ease;
            --transition-slow: 0.3s ease;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #EBF4FF 0%, #E0F2FE 100%);
            color: var(--text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        /* ============================================
           LAYOUT COMPONENTS
           ============================================ */

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            padding: var(--space-lg);
            min-height: 100vh;
        }

        /* Header */
        .app-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
            padding: var(--space-lg) 0;
        }

        .app-logo {
            font-size: var(--font-3xl);
            font-weight: var(--font-bold);
            color: var(--primary);
            margin-bottom: var(--space-sm);
        }

        .app-tagline {
            font-size: var(--font-base);
            color: var(--text-secondary);
            font-weight: var(--font-medium);
        }

        /* Start Button */
        .start-booking-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-md);
            padding: var(--space-xl) var(--space-lg);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            font-size: var(--font-lg);
            font-weight: var(--font-semibold);
            transition: all var(--transition-base);
            cursor: pointer;
            border: none;
        }

        .start-booking-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .start-booking-btn:active {
            transform: scale(0.98);
        }

        .start-booking-btn .icon {
            font-size: var(--font-2xl);
        }

        /* Booking Container */
        .booking-container {
            display: none;
            background: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            transition: all var(--transition-slow);
        }

        .booking-container.active {
            display: block;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Progress Bar */
        .progress-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: var(--space-lg);
            text-align: center;
        }

        .progress-title {
            font-size: var(--font-xl);
            font-weight: var(--font-semibold);
            margin-bottom: var(--space-sm);
        }

        .progress-steps {
            display: flex;
            justify-content: center;
            gap: var(--space-lg);
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            opacity: 0.6;
            transition: opacity var(--transition-base);
        }

        .progress-step.active {
            opacity: 1;
        }

        .step-number {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-sm);
            font-weight: var(--font-semibold);
        }

        .progress-step.active .step-number {
            background: var(--white);
            color: var(--primary);
        }

        .step-label {
            font-size: var(--font-sm);
            font-weight: var(--font-medium);
        }

        /* Panel System */
        .panels-wrapper {
            display: flex;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .panels-wrapper.show-appointment { transform: translateX(-100%); }
        .panels-wrapper.show-service { transform: translateX(-200%); }

        .panel {
            width: 100%;
            flex-shrink: 0;
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .panel-content {
            flex: 1;
            padding: var(--space-xl);
        }

        .panel h2 {
            font-size: var(--font-2xl);
            font-weight: var(--font-semibold);
            margin-bottom: var(--space-lg);
            color: var(--text-primary);
        }

        .panel-actions {
            padding: var(--space-xl);
            border-top: 1px solid var(--border);
            background: var(--background);
        }

        /* ============================================
           LOCATION PANEL COMPONENTS
           ============================================ */

        /* Trip Direction Selector */
        .direction-selector {
            display: flex;
            gap: var(--space-sm);
            background: var(--surface);
            padding: var(--space-sm);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xl);
        }

        .direction-btn {
            flex: 1;
            padding: var(--space-md);
            border-radius: var(--radius-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            transition: all var(--transition-base);
            cursor: pointer;
            border: none;
            background: transparent;
        }

        .direction-btn:hover {
            color: var(--text-primary);
        }

        .direction-btn.active {
            background: var(--white);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .direction-icon {
            font-size: var(--font-2xl);
        }

        .direction-text {
            font-size: var(--font-sm);
            text-align: center;
        }

        /* Address Input */
        .input-section {
            margin-bottom: var(--space-xl);
        }

        .input-label {
            font-size: var(--font-base);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .input-wrapper {
            position: relative;
        }

        .address-input {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            transition: all var(--transition-base);
        }

        .address-input:focus {
            border-color: var(--primary);
            background: var(--white);
            outline: none;
        }

        .address-input.validated {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        /* Medical Facilities Grid */
        .facilities-section {
            margin-bottom: var(--space-xl);
        }

        .facilities-grid {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            max-height: 300px;
            overflow-y: auto;
        }

        .facility-card {
            padding: var(--space-lg);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--white);
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .facility-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .facility-card.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .facility-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: var(--space-sm);
        }

        .facility-name {
            font-size: var(--font-lg);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .facility-distance {
            font-size: var(--font-sm);
            color: var(--primary);
            font-weight: var(--font-medium);
        }

        .facility-address {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
        }

        .facility-departments {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
        }

        .department-tag {
            padding: var(--space-xs) var(--space-sm);
            background: var(--surface);
            color: var(--text-secondary);
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: var(--font-medium);
        }

        /* ============================================
           APPOINTMENT PANEL COMPONENTS
           ============================================ */

        /* Payment Method Selector */
        .payment-section {
            margin-bottom: var(--space-xl);
        }

        .payment-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
        }

        .payment-card {
            padding: var(--space-lg);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--white);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .payment-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .payment-card.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: var(--white);
        }

        .payment-icon {
            font-size: var(--font-2xl);
        }

        .payment-name {
            font-size: var(--font-sm);
            font-weight: var(--font-semibold);
            text-align: center;
        }

        .payment-rate {
            font-size: var(--font-xs);
            opacity: 0.8;
            text-align: center;
        }

        /* Appointment Details */
        .appointment-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .form-input {
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            background: var(--background);
            transition: border-color var(--transition-base);
        }

        .form-input:focus {
            border-color: var(--primary);
            outline: none;
            background: var(--white);
        }

        .form-select {
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            background: var(--background);
            cursor: pointer;
        }

        /* Recurring Schedule */
        .recurring-section {
            margin-bottom: var(--space-xl);
        }

        .recurring-options {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        .recurring-btn {
            padding: var(--space-sm) var(--space-md);
            border: 2px solid var(--border);
            border-radius: var(--radius-full);
            background: var(--white);
            font-size: var(--font-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .recurring-btn:hover {
            border-color: var(--primary);
        }

        .recurring-btn.selected {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Return Trip Options */
        .return-trip-section {
            padding: var(--space-lg);
            background: var(--surface);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xl);
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
        }

        .checkbox-label {
            font-size: var(--font-base);
            font-weight: var(--font-medium);
        }

        .return-options {
            display: none;
            margin-top: var(--space-md);
        }

        .return-options.visible {
            display: block;
        }

        /* ============================================
           SERVICE PANEL COMPONENTS
           ============================================ */

        .service-grid {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .service-card {
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            background: var(--white);
            overflow: hidden;
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .service-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .service-card.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px var(--primary-light), var(--shadow-lg);
        }

        .service-header {
            padding: var(--space-lg);
            background: linear-gradient(135deg, var(--surface) 0%, var(--border-light) 100%);
            position: relative;
        }

        .service-badge {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: var(--success);
            color: var(--white);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: var(--font-bold);
        }

        .service-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-2xl);
            color: var(--white);
            margin-bottom: var(--space-md);
        }

        .service-name {
            font-size: var(--font-xl);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .service-description {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        .service-body {
            padding: var(--space-lg);
        }

        .service-features {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .feature-tag {
            padding: var(--space-xs) var(--space-sm);
            background: var(--primary-light);
            color: var(--primary);
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: var(--font-medium);
        }

        .service-pricing {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            background: var(--surface);
            border-radius: var(--radius-md);
        }

        .pricing-label {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        .pricing-value {
            font-size: var(--font-lg);
            font-weight: var(--font-bold);
            color: var(--primary);
        }

        /* ============================================
           ACTION BUTTONS
           ============================================ */

        .action-btn {
            width: 100%;
            padding: var(--space-lg) var(--space-xl);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            border-radius: var(--radius-lg);
            font-size: var(--font-lg);
            font-weight: var(--font-semibold);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            transition: all var(--transition-base);
            cursor: pointer;
            border: none;
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .action-btn:disabled {
            background: var(--border);
            color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        .back-btn {
            position: absolute;
            top: var(--space-lg);
            left: var(--space-lg);
            padding: var(--space-sm) var(--space-md);
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: var(--font-sm);
            font-weight: var(--font-medium);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            cursor: pointer;
            transition: all var(--transition-base);
            z-index: 10;
        }

        .back-btn:hover {
            background: var(--white);
            box-shadow: var(--shadow-sm);
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */

        @media (max-width: 480px) {
            .app-container {
                padding: var(--space-md);
            }
            
            .payment-grid {
                grid-template-columns: 1fr;
            }
            
            .direction-selector {
                flex-direction: column;
            }
            
            .recurring-options {
                justify-content: center;
            }
        }

        /* ============================================
           KIOSK OPTIMIZATIONS
           ============================================ */

        @media (min-width: 768px) {
            .kiosk-mode {
                font-size: 20px;
            }
            
            .kiosk-mode .action-btn {
                min-height: 70px;
                font-size: var(--font-xl);
            }
            
            .kiosk-mode .facility-card {
                padding: var(--space-xl);
                min-height: 100px;
            }
            
            .kiosk-mode .payment-card {
                padding: var(--space-xl);
                min-height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- App Header -->
        <div class="app-header">
            <div class="app-logo">🏥 MedTransport</div>
            <div class="app-tagline">Reliable Medical Transportation</div>
        </div>
        
        <!-- Start Booking Button -->
        <button class="start-booking-btn" id="startBookingBtn">
            <span class="icon">🚗</span>
            <span>Schedule Medical Transport</span>
        </button>
        
        <!-- Main Booking Container -->
        <div class="booking-container" id="bookingContainer">
            <!-- Progress Header -->
            <div class="progress-header">
                <div class="progress-title">Book Your Medical Transport</div>
                <div class="progress-steps">
                    <div class="progress-step active" data-step="location">
                        <span class="step-number">1</span>
                        <span class="step-label">Location</span>
                    </div>
                    <div class="progress-step" data-step="appointment">
                        <span class="step-number">2</span>
                        <span class="step-label">Appointment</span>
                    </div>
                    <div class="progress-step" data-step="service">
                        <span class="step-number">3</span>
                        <span class="step-label">Service</span>
                    </div>
                </div>
            </div>
            
            <!-- Panels Container -->
            <div class="panels-wrapper" id="panelsWrapper">
                <!-- LOCATION Panel -->
                <div class="panel" id="locationPanel">
                    <div class="panel-content">
                        <h2>Select Your Route</h2>
                        
                        <!-- Trip Direction Selector -->
                        <div class="direction-selector">
                            <button class="direction-btn active" data-direction="to_facility">
                                <span class="direction-icon">🏥</span>
                                <span class="direction-text">Going to<br>Medical Facility</span>
                            </button>
                            <button class="direction-btn" data-direction="from_facility">
                                <span class="direction-icon">🏠</span>
                                <span class="direction-text">Returning<br>Home</span>
                            </button>
                        </div>

                        <!-- Home Address Input -->
                        <div class="input-section">
                            <div class="input-label">
                                <span>🏠</span>
                                <span id="addressLabel">Your Home Address</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="text" 
                                       id="addressInput" 
                                       class="address-input"
                                       placeholder="Enter your home address..."
                                       autocomplete="off">
                            </div>
                        </div>

                        <!-- Medical Facilities -->
                        <div class="facilities-section">
                            <div class="input-label">
                                <span>🏥</span>
                                <span>Select Medical Facility</span>
                            </div>
                            
                            <div class="facilities-grid">
                                <div class="facility-card" data-facility="jackson_memorial">
                                    <div class="facility-header">
                                        <div>
                                            <div class="facility-name">Jackson Memorial Hospital</div>
                                            <div class="facility-address">1611 NW 12th Ave, Miami, FL 33136</div>
                                        </div>
                                        <div class="facility-distance">2.3 mi</div>
                                    </div>
                                    <div class="facility-departments">
                                        <span class="department-tag">Cardiology</span>
                                        <span class="department-tag">Oncology</span>
                                        <span class="department-tag">Emergency</span>
                                        <span class="department-tag">Surgery</span>
                                    </div>
                                </div>
                                
                                <div class="facility-card" data-facility="baptist_hospital">
                                    <div class="facility-header">
                                        <div>
                                            <div class="facility-name">Baptist Hospital of Miami</div>
                                            <div class="facility-address">8900 N Kendall Dr, Miami, FL 33176</div>
                                        </div>
                                        <div class="facility-distance">5.7 mi</div>
                                    </div>
                                    <div class="facility-departments">
                                        <span class="department-tag">Orthopedics</span>
                                        <span class="department-tag">Neurology</span>
                                        <span class="department-tag">Physical Therapy</span>
                                    </div>
                                </div>
                                
                                <div class="facility-card" data-facility="mercy_hospital">
                                    <div class="facility-header">
                                        <div>
                                            <div class="facility-name">Mercy Hospital</div>
                                            <div class="facility-address">3663 S Miami Ave, Miami, FL 33133</div>
                                        </div>
                                        <div class="facility-distance">3.1 mi</div>
                                    </div>
                                    <div class="facility-departments">
                                        <span class="department-tag">Dialysis</span>
                                        <span class="department-tag">Lab Services</span>
                                        <span class="department-tag">Imaging</span>
                                    </div>
                                </div>
                                
                                <div class="facility-card" data-facility="miami_va">
                                    <div class="facility-header">
                                        <div>
                                            <div class="facility-name">Miami VA Medical Center</div>
                                            <div class="facility-address">1201 NW 16th St, Miami, FL 33125</div>
                                        </div>
                                        <div class="facility-distance">1.8 mi</div>
                                    </div>
                                    <div class="facility-departments">
                                        <span class="department-tag">Veterans Services</span>
                                        <span class="department-tag">Primary Care</span>
                                        <span class="department-tag">Mental Health</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-actions">
                        <button class="action-btn" id="continueToAppointmentBtn" disabled>
                            Continue to Appointment Details
                            <span>→</span>
                        </button>
                    </div>
                </div>
                
                <!-- APPOINTMENT Panel -->
                <div class="panel" id="appointmentPanel">
                    <button class="back-btn" id="backToLocationBtn">
                        <span>←</span>
                        <span>Back</span>
                    </button>
                    
                    <div class="panel-content" style="padding-top: 60px;">
                        <h2>Appointment Details</h2>
                        
                        <!-- Payment Method -->
                        <div class="payment-section">
                            <div class="input-label">
                                <span>💳</span>
                                <span>Payment Method</span>
                            </div>
                            <div class="payment-grid">
                                <div class="payment-card" data-payment="medicaid">
                                    <span class="payment-icon">🏥</span>
                                    <span class="payment-name">Medicaid</span>
                                    <span class="payment-rate">Covered</span>
                                </div>
                                <div class="payment-card" data-payment="insurance">
                                    <span class="payment-icon">💳</span>
                                    <span class="payment-name">Insurance</span>
                                    <span class="payment-rate">Co-pay</span>
                                </div>
                                <div class="payment-card" data-payment="self">
                                    <span class="payment-icon">💰</span>
                                    <span class="payment-name">Self Pay</span>
                                    <span class="payment-rate">Full Rate</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Appointment Form -->
                        <div class="appointment-form">
                            <div class="input-label">
                                <span>📅</span>
                                <span>Appointment Date & Time</span>
                            </div>
                            <input type="datetime-local" 
                                   id="appointmentDateTime" 
                                   class="form-input">
                            
                            <div class="input-label">
                                <span>🩺</span>
                                <span>Appointment Type</span>
                            </div>
                            <select id="appointmentType" class="form-select">
                                <option value="">Select appointment type</option>
                                <option value="routine">Routine Visit</option>
                                <option value="dialysis">Dialysis Treatment</option>
                                <option value="chemotherapy">Chemotherapy</option>
                                <option value="physical_therapy">Physical Therapy</option>
                                <option value="lab_work">Lab Work</option>
                                <option value="specialist">Specialist Consultation</option>
                                <option value="emergency">Urgent Care</option>
                            </select>
                            
                            <div class="input-label">
                                <span>👨‍⚕️</span>
                                <span>Doctor/Department (Optional)</span>
                            </div>
                            <input type="text" 
                                   id="doctorName" 
                                   class="form-input"
                                   placeholder="Dr. Smith, Cardiology Department, etc.">
                        </div>
                        
                        <!-- Recurring Schedule */
                        <div class="recurring-section">
                            <div class="input-label">
                                <span>🔄</span>
                                <span>Recurring Schedule</span>
                            </div>
                            <div class="recurring-options">
                                <button class="recurring-btn selected" data-frequency="none">One-time</button>
                                <button class="recurring-btn" data-frequency="weekly">Weekly</button>
                                <button class="recurring-btn" data-frequency="biweekly">Bi-weekly</button>
                                <button class="recurring-btn" data-frequency="monthly">Monthly</button>
                            </div>
                        </div>
                        
                        <!-- Return Trip */
                        <div class="return-trip-section">
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="returnTripCheckbox" class="checkbox">
                                <label for="returnTripCheckbox" class="checkbox-label">Schedule return trip</label>
                            </div>
                            
                            <div class="return-options" id="returnTripOptions">
                                <div class="input-label">
                                    <span>⏱️</span>
                                    <span>Wait Time</span>
                                </div>
                                <select id="waitTimeSelect" class="form-select">
                                    <option value="30">Wait 30 minutes</option>
                                    <option value="60">Wait 1 hour</option>
                                    <option value="120">Wait 2 hours</option>
                                    <option value="180">Wait 3 hours</option>
                                    <option value="240">Wait 4 hours</option>
                                    <option value="custom">Custom wait time</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-actions">
                        <button class="action-btn" id="continueToServiceBtn">
                            Continue to Service Selection
                            <span>→</span>
                        </button>
                    </div>
                </div>

                <!-- SERVICE Panel -->
                <div class="panel" id="servicePanel">
                    <button class="back-btn" id="backToAppointmentBtn">
                        <span>←</span>
                        <span>Back</span>
                    </button>
                    
                    <div class="panel-content" style="padding-top: 60px;">
                        <h2>Choose Your Service</h2>
                        
                        <div class="service-grid">
                            <!-- Standard Sedan -->
                            <div class="service-card" data-service="standard">
                                <div class="service-header">
                                    <div class="service-badge">Medicaid Approved</div>
                                    <div class="service-icon">🚗</div>
                                    <div class="service-name">Standard Sedan</div>
                                    <div class="service-description">Comfortable transportation for ambulatory patients</div>
                                </div>
                                <div class="service-body">
                                    <div class="service-features">
                                        <span class="feature-tag">Air Conditioning</span>
                                        <span class="feature-tag">Professional Driver</span>
                                        <span class="feature-tag">Insurance Verified</span>
                                        <span class="feature-tag">4 Passengers</span>
                                    </div>
                                    <div class="service-pricing">
                                        <span class="pricing-label">Medicaid Rate</span>
                                        <span class="pricing-value" id="standardPrice">$2.85/mile</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Premium Comfort -->
                            <div class="service-card" data-service="premium">
                                <div class="service-header">
                                    <div class="service-badge">Medicaid Approved</div>
                                    <div class="service-icon">🚙</div>
                                    <div class="service-name">Premium Comfort</div>
                                    <div class="service-description">Enhanced comfort for longer trips and special needs</div>
                                </div>
                                <div class="service-body">
                                    <div class="service-features">
                                        <span class="feature-tag">Leather Seats</span>
                                        <span class="feature-tag">Climate Control</span>
                                        <span class="feature-tag">Phone Charging</span>
                                        <span class="feature-tag">Extra Legroom</span>
                                    </div>
                                    <div class="service-pricing">
                                        <span class="pricing-label">Medicaid Rate</span>
                                        <span class="pricing-value" id="premiumPrice">$3.15/mile</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Wheelchair Accessible -->
                            <div class="service-card" data-service="accessible">
                                <div class="service-header">
                                    <div class="service-badge">Medicaid Approved</div>
                                    <div class="service-icon">♿</div>
                                    <div class="service-name">Wheelchair Accessible</div>
                                    <div class="service-description">ADA-compliant vehicle with wheelchair lift and secure tie-downs</div>
                                </div>
                                <div class="service-body">
                                    <div class="service-features">
                                        <span class="feature-tag">Wheelchair Lift</span>
                                        <span class="feature-tag">Secure Tie-downs</span>
                                        <span class="feature-tag">ADA Certified</span>
                                        <span class="feature-tag">2 Wheelchairs</span>
                                    </div>
                                    <div class="service-pricing">
                                        <span class="pricing-label">Medicaid Rate</span>
                                        <span class="pricing-value" id="accessiblePrice">$4.25/mile</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-actions">
                        <button class="action-btn" id="bookTransportBtn" disabled>
                            Book Medical Transport
                            <span>✓</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // NEMT PLATFORM MVP APPLICATION
        // ============================================
        
        class NEMTMVPApp {
            constructor() {
                this.state = {
                    currentPanel: 'location',
                    direction: 'to_facility',
                    homeAddress: null,
                    selectedFacility: null,
                    paymentMethod: null,
                    appointmentDetails: {
                        datetime: null,
                        type: null,
                        doctor: null,
                        recurring: 'none',
                        returnTrip: false,
                        waitTime: 30
                    },
                    selectedService: null
                };
                
                this.facilities = {
                    jackson_memorial: {
                        name: 'Jackson Memorial Hospital',
                        address: '1611 NW 12th Ave, Miami, FL 33136',
                        distance: '2.3 mi',
                        departments: ['Cardiology', 'Oncology', 'Emergency', 'Surgery']
                    },
                    baptist_hospital: {
                        name: 'Baptist Hospital of Miami',
                        address: '8900 N Kendall Dr, Miami, FL 33176',
                        distance: '5.7 mi',
                        departments: ['Orthopedics', 'Neurology', 'Physical Therapy']
                    },
                    mercy_hospital: {
                        name: 'Mercy Hospital',
                        address: '3663 S Miami Ave, Miami, FL 33133',
                        distance: '3.1 mi',
                        departments: ['Dialysis', 'Lab Services', 'Imaging']
                    },
                    miami_va: {
                        name: 'Miami VA Medical Center',
                        address: '1201 NW 16th St, Miami, FL 33125',
                        distance: '1.8 mi',
                        departments: ['Veterans Services', 'Primary Care', 'Mental Health']
                    }
                };
                
                this.services = {
                    standard: {
                        name: 'Standard Sedan',
                        medicaidRate: 2.85,
                        privateRate: 3.25
                    },
                    premium: {
                        name: 'Premium Comfort',
                        medicaidRate: 3.15,
                        privateRate: 3.75
                    },
                    accessible: {
                        name: 'Wheelchair Accessible',
                        medicaidRate: 4.25,
                        privateRate: 5.50
                    }
                };
                
                this.init();
            }
            
            init() {
                this.cacheElements();
                this.bindEvents();
                this.setDefaultDateTime();
                console.log('🏥 NEMT MVP Platform initialized');
            }
            
            cacheElements() {
                this.els = {
                    startBtn: document.getElementById('startBookingBtn'),
                    bookingContainer: document.getElementById('bookingContainer'),
                    panelsWrapper: document.getElementById('panelsWrapper'),
                    
                    // Direction buttons
                    directionBtns: document.querySelectorAll('.direction-btn'),
                    
                    // Address input
                    addressInput: document.getElementById('addressInput'),
                    addressLabel: document.getElementById('addressLabel'),
                    
                    // Facility cards
                    facilityCards: document.querySelectorAll('.facility-card'),
                    
                    // Payment cards
                    paymentCards: document.querySelectorAll('.payment-card'),
                    
                    // Appointment form
                    appointmentDateTime: document.getElementById('appointmentDateTime'),
                    appointmentType: document.getElementById('appointmentType'),
                    doctorName: document.getElementById('doctorName'),
                    
                    // Recurring buttons
                    recurringBtns: document.querySelectorAll('.recurring-btn'),
                    
                    // Return trip
                    returnTripCheckbox: document.getElementById('returnTripCheckbox'),
                    returnTripOptions: document.getElementById('returnTripOptions'),
                    waitTimeSelect: document.getElementById('waitTimeSelect'),
                    
                    // Service cards
                    serviceCards: document.querySelectorAll('.service-card'),
                    
                    // Navigation buttons
                    continueToAppointmentBtn: document.getElementById('continueToAppointmentBtn'),
                    continueToServiceBtn: document.getElementById('continueToServiceBtn'),
                    bookTransportBtn: document.getElementById('bookTransportBtn'),
                    backToLocationBtn: document.getElementById('backToLocationBtn'),
                    backToAppointmentBtn: document.getElementById('backToAppointmentBtn'),
                    
                    // Progress steps
                    progressSteps: document.querySelectorAll('.progress-step')
                };
            }
            
            bindEvents() {
                // Start booking
                this.els.startBtn.addEventListener('click', () => this.startBooking());
                
                // Direction selection
                this.els.directionBtns.forEach(btn => {
                    btn.addEventListener('click', () => this.selectDirection(btn.dataset.direction));
                });
                
                // Address input
                this.els.addressInput.addEventListener('input', () => this.validateAddress());
                
                // Facility selection
                this.els.facilityCards.forEach(card => {
                    card.addEventListener('click', () => this.selectFacility(card.dataset.facility));
                });
                
                // Payment method selection
                this.els.paymentCards.forEach(card => {
                    card.addEventListener('click', () => this.selectPaymentMethod(card.dataset.payment));
                });
                
                // Recurring schedule
                this.els.recurringBtns.forEach(btn => {
                    btn.addEventListener('click', () => this.selectRecurring(btn.dataset.frequency));
                });
                
                // Return trip toggle
                this.els.returnTripCheckbox.addEventListener('change', (e) => {
                    this.toggleReturnTrip(e.target.checked);
                });
                
                // Service selection
                this.els.serviceCards.forEach(card => {
                    card.addEventListener('click', () => this.selectService(card.dataset.service));
                });
                
                // Navigation
                this.els.continueToAppointmentBtn.addEventListener('click', () => this.navigateToPanel('appointment'));
                this.els.continueToServiceBtn.addEventListener('click', () => this.navigateToPanel('service'));
                this.els.bookTransportBtn.addEventListener('click', () => this.bookTransport());
                this.els.backToLocationBtn.addEventListener('click', () => this.navigateToPanel('location'));
                this.els.backToAppointmentBtn.addEventListener('click', () => this.navigateToPanel('appointment'));
            }
            
            startBooking() {
                this.els.startBtn.style.display = 'none';
                this.els.bookingContainer.classList.add('active');
            }
            
            selectDirection(direction) {
                this.state.direction = direction;
                
                // Update button states
                this.els.directionBtns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.direction === direction);
                });
                
                // Update address label
                const label = direction === 'to_facility' ? 'Your Home Address' : 'Your Destination Address';
                this.els.addressLabel.textContent = label;
                
                console.log('Direction selected:', direction);
            }
            
            validateAddress() {
                const value = this.els.addressInput.value.trim();
                
                if (value.length > 10) {
                    // Simulate address validation
                    this.els.addressInput.classList.add('validated');
                    this.state.homeAddress = value;
                } else {
                    this.els.addressInput.classList.remove('validated');
                    this.state.homeAddress = null;
                }
                
                this.updateContinueButton();
            }
            
            selectFacility(facilityId) {
                // Remove previous selections
                this.els.facilityCards.forEach(card => card.classList.remove('selected'));
                
                // Select current facility
                const selectedCard = document.querySelector(`[data-facility="${facilityId}"]`);
                selectedCard.classList.add('selected');
                
                // Store selection
                this.state.selectedFacility = {
                    id: facilityId,
                    ...this.facilities[facilityId]
                };
                
                console.log('Facility selected:', this.state.selectedFacility.name);
                this.updateContinueButton();
            }
            
            selectPaymentMethod(method) {
                // Remove previous selections
                this.els.paymentCards.forEach(card => card.classList.remove('selected'));
                
                // Select current method
                const selectedCard = document.querySelector(`[data-payment="${method}"]`);
                selectedCard.classList.add('selected');
                
                // Store selection
                this.state.paymentMethod = method;
                
                console.log('Payment method selected:', method);
                this.updateServicePricing();
            }
            
            selectRecurring(frequency) {
                // Remove previous selections
                this.els.recurringBtns.forEach(btn => btn.classList.remove('selected'));
                
                // Select current frequency
                const selectedBtn = document.querySelector(`[data-frequency="${frequency}"]`);
                selectedBtn.classList.add('selected');
                
                // Store selection
                this.state.appointmentDetails.recurring = frequency;
                
                console.log('Recurring schedule:', frequency);
            }
            
            toggleReturnTrip(enabled) {
                this.state.appointmentDetails.returnTrip = enabled;
                this.els.returnTripOptions.classList.toggle('visible', enabled);
                
                console.log('Return trip:', enabled);
            }
            
            selectService(serviceId) {
                // Remove previous selections
                this.els.serviceCards.forEach(card => card.classList.remove('selected'));
                
                // Select current service
                const selectedCard = document.querySelector(`[data-service="${serviceId}"]`);
                selectedCard.classList.add('selected');
                
                // Store selection
                this.state.selectedService = {
                    id: serviceId,
                    ...this.services[serviceId]
                };
                
                console.log('Service selected:', this.state.selectedService.name);
                this.els.bookTransportBtn.disabled = false;
            }
            
            updateServicePricing() {
                if (!this.state.paymentMethod) return;
                
                Object.keys(this.services).forEach(serviceId => {
                    const service = this.services[serviceId];
                    const priceElement = document.getElementById(`${serviceId}Price`);
                    
                    if (priceElement) {
                        const rate = this.state.paymentMethod === 'medicaid' 
                            ? service.medicaidRate 
                            : service.privateRate;
                        
                        priceElement.textContent = `$${rate.toFixed(2)}/mile`;
                    }
                });
            }
            
            updateContinueButton() {
                const canContinue = this.state.homeAddress && this.state.selectedFacility;
                this.els.continueToAppointmentBtn.disabled = !canContinue;
            }
            
            navigateToPanel(panel) {
                this.state.currentPanel = panel;
                
                // Update panel wrapper
                this.els.panelsWrapper.classList.remove('show-appointment', 'show-service');
                if (panel === 'appointment') {
                    this.els.panelsWrapper.classList.add('show-appointment');
                } else if (panel === 'service') {
                    this.els.panelsWrapper.classList.add('show-service');
                }
                
                // Update progress steps
                this.els.progressSteps.forEach(step => {
                    step.classList.toggle('active', step.dataset.step === panel);
                });
                
                console.log('Navigated to panel:', panel);
            }
            
            setDefaultDateTime() {
                // Set default appointment time to tomorrow at 10:00 AM
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(10, 0, 0, 0);
                
                const isoString = tomorrow.toISOString().slice(0, 16);
                this.els.appointmentDateTime.value = isoString;
            }
            
            bookTransport() {
                const bookingData = {
                    direction: this.state.direction,
                    homeAddress: this.state.homeAddress,
                    facility: this.state.selectedFacility?.name,
                    paymentMethod: this.state.paymentMethod,
                    appointmentDateTime: this.els.appointmentDateTime.value,
                    appointmentType: this.els.appointmentType.value,
                    doctorName: this.els.doctorName.value,
                    recurring: this.state.appointmentDetails.recurring,
                    returnTrip: this.state.appointmentDetails.returnTrip,
                    waitTime: this.els.waitTimeSelect.value,
                    service: this.state.selectedService?.name,
                    estimatedRate: this.state.paymentMethod === 'medicaid' 
                        ? this.state.selectedService?.medicaidRate 
                        : this.state.selectedService?.privateRate
                };
                
                console.log('🎉 Medical transport booking confirmed:', bookingData);
                
                // Show success message
                const appointmentDate = new Date(bookingData.appointmentDateTime).toLocaleDateString();
                const appointmentTime = new Date(bookingData.appointmentDateTime).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                alert(`✅ Medical Transport Booked Successfully!

📍 Route: ${bookingData.direction === 'to_facility' ? 'Home → ' + bookingData.facility : bookingData.facility + ' → Home'}
📅 Date: ${appointmentDate}
🕐 Time: ${appointmentTime}
🚗 Service: ${bookingData.service}
💳 Payment: ${bookingData.paymentMethod}
${bookingData.returnTrip ? '↩️ Return trip included' : ''}
${bookingData.recurring !== 'none' ? '🔄 Recurring: ' + bookingData.recurring : ''}

A confirmation will be sent to your phone. Your driver will arrive 15 minutes before pickup time.`);
                
                // Reset app for demo purposes
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }
        
        // Initialize the NEMT MVP application
        const nemtMVP = new NEMTMVPApp();
    </script>
</body>
</html>

